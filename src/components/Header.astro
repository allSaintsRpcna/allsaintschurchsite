---
const navLinks = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/beliefs", label: "Beliefs" },
  { href: "/sermons", label: "Sermons" },
  { href: "/contact", label: "Contact" },
];

const currentPath = Astro.url.pathname;
---

<header id="site-header" class="fixed top-0 left-0 w-full z-50 transition-colors duration-300">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <a href="/" class="text-xl font-semibold text-gray-900 hover:text-gray-700">
      All Saints RPC
    </a>

    <!-- Mobile menu button -->
    <button
      id="menu-toggle"
      class="md:hidden text-gray-700 hover:text-gray-900"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Desktop nav -->
    <nav class="hidden md:block">
      <ul class="flex gap-6">
        {navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class:list={[
                "text-sm transition-colors",
                currentPath === link.href
                  ? "text-gray-900 font-medium"
                  : "text-gray-600 hover:text-gray-900",
              ]}
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </div>

  <!-- Mobile nav -->
  <nav id="mobile-menu" class="hidden md:hidden border-t border-gray-100">
    <ul class="flex flex-col px-4 py-2">
      {navLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class:list={[
              "block py-2 text-sm transition-colors",
              currentPath === link.href
                ? "text-gray-900 font-medium"
                : "text-gray-600 hover:text-gray-900",
            ]}
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</header>

<!-- Spacer to prevent content from hiding behind the fixed header -->
<div id="header-spacer" class="h-[56px]"></div>

<script>
  const header = document.getElementById("site-header");
  const toggle = document.getElementById("menu-toggle");
  const menu = document.getElementById("mobile-menu");

  function updateHeader() {
    if (window.scrollY > 10) {
      header?.classList.add("bg-slate-200", "border-b", "border-gray-200");
    } else {
      header?.classList.remove("bg-slate-200", "border-b", "border-gray-200");
    }
  }

  updateHeader();
  window.addEventListener("scroll", updateHeader);

  toggle?.addEventListener("click", () => {
    const isOpen = !menu?.classList.contains("hidden");
    menu?.classList.toggle("hidden");
    toggle.setAttribute("aria-expanded", String(!isOpen));
  });
</script>
