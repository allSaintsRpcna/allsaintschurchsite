---
import PageLayout from "../../layouts/PageLayout.astro";
import { confessionOfFaith } from "../../data/confession.js";

const chapters = [
  "Of the Holy Scripture",
  "Of God, and of the Holy Trinity",
  "Of God's Eternal Decree",
  "Of Creation",
  "Of Providence",
  "Of the Fall of Man, of Sin, and of the Punishment Thereof",
  "Of God's Covenant with Man",
  "Of Christ the Mediator",
  "Of Free Will",
  "Of Effectual Calling",
  "Of Justification",
  "Of Adoption",
  "Of Sanctification",
  "Of Saving Faith",
  "Of Repentance unto Life",
  "Of Good Works",
  "Of the Perseverance of the Saints",
  "Of the Assurance of Grace and Salvation",
  "Of the Law of God",
  "Of Christian Liberty, and Liberty of Conscience",
  "Of Religious Worship, and the Sabbath Day",
  "Of Lawful Oaths and Vows",
  "Of the Civil Magistrate",
  "Of Marriage and Divorce",
  "Of the Church",
  "Of the Communion of Saints",
  "Of the Sacraments",
  "Of Baptism",
  "Of the Lord's Supper",
  "Of Church Censures",
  "Of Synods and Councils",
  "Of the State of Men after Death, and of the Resurrection of the Dead",
  "Of the Last Judgment",
];

const alphabet = "abcdefghijklmnopqrstuvwxyz";
---

<PageLayout transparentHeader>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap"
    rel="stylesheet"
  />

  <section class="pt-32 pb-20 md:pt-40 md:pb-28 bg-stone-800 text-center">
    <div class="max-w-3xl mx-auto px-4">
      <p class="text-sm uppercase tracking-[0.3em] text-white/60 mb-4">Confessional Document</p>
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">Westminster Confession of Faith</h1>
    </div>
  </section>

  <div class="wcf-page">
    <!-- Table of Contents -->
    <section class="wcf-toc-section">
      <div class="max-w-2xl mx-auto px-4">
        <div class="wcf-divider-ornate">
          <span>&#8226; &#8226; &#8226;</span>
        </div>
        <h2 class="wcf-toc-heading">Table of Contents</h2>
        <div class="wcf-divider-line"></div>
        <ol class="wcf-toc-list">
          {
            chapters.map((title, i) => (
              <li>
                <a href={`#chapter-${i + 1}`} class="wcf-toc-link">
                  <span class="wcf-toc-num">{i + 1}.</span>
                  <span>{title}</span>
                </a>
              </li>
            ))
          }
        </ol>
        <div class="wcf-divider-line"></div>
      </div>
    </section>

    <!-- Confession Content -->
    <section class="wcf-content-section">
      <div class="max-w-2xl mx-auto px-4">
        {
          confessionOfFaith.map((chapter, chapterIndex) => (
            <article
              id={`chapter-${chapter.id}`}
              class:list={[
                "wcf-chapter",
                chapterIndex > 0 && "wcf-chapter-border",
              ]}
            >
              <header class="wcf-chapter-header">
                <span class="wcf-chapter-label">Chapter {chapter.id}</span>
                <h2 class="wcf-chapter-title">{chapter.title}</h2>
                <div class="wcf-chapter-rule" />
              </header>

              {chapter.paragraphs.map((paragraph) => (
                <div class="wcf-paragraph-block">
                  <p class="wcf-paragraph">
                    <span class="wcf-para-num">{paragraph.id}.</span>
                    {paragraph.passage.map((text, passageIndex) => (
                      <span>
                        {text}
                        <sup
                          class="wcf-sup"
                          title={
                            paragraph.proofTexts[passageIndex]
                              ? paragraph.proofTexts[passageIndex]
                                  .map((ref) => `${ref.book} ${ref.verse}`)
                                  .join("; ")
                              : ""
                          }
                        >
                          {alphabet[passageIndex]}
                        </sup>{" "}
                      </span>
                    ))}
                  </p>

                  <div class="wcf-proofs">
                    {paragraph.passage.map(
                      (_, passageIndex) =>
                        paragraph.proofTexts[passageIndex] &&
                        paragraph.proofTexts[passageIndex].length > 0 && (
                          <span class="wcf-proof-line">
                            <span class="wcf-proof-letter">
                              {alphabet[passageIndex]}.
                            </span>{" "}
                            {paragraph.proofTexts[passageIndex].map(
                              (ref, refIndex) => (
                                <span class="wcf-proof-ref">
                                  {ref.book} {ref.verse}
                                  {refIndex <
                                  paragraph.proofTexts[passageIndex].length - 1
                                    ? "; "
                                    : ""}
                                </span>
                              ),
                            )}
                          </span>
                        ),
                    )}
                  </div>
                </div>
              ))}

              <div class="wcf-back-top">
                <a href="#chapter-1" class="wcf-back-link">
                  &uarr; Return to Contents
                </a>
              </div>
            </article>
          ))
        }

        <div class="wcf-finis">
          <div class="wcf-divider-ornate"><span>&#10022;</span></div>
          <p>Soli Deo Gloria</p>
          <div class="wcf-divider-ornate"><span>&#10022;</span></div>
        </div>
      </div>
    </section>
  </div>
</PageLayout>

<style>
  /* ── Base ── */
  .wcf-page {
    --color-ink: #2c2416;
    --color-ink-light: #5c5244;
    --color-ink-muted: #8a7e6e;
    --color-parchment: #f5f0e8;
    --color-parchment-dark: #ebe4d6;
    --color-accent: #7a3b2e;
    --font-display: "Cormorant Garamond", "Georgia", serif;
    --font-body: "EB Garamond", "Georgia", serif;
    background-color: white;
    color: var(--color-ink);
  }

  /* ── Hero ── */
  .wcf-hero {
    padding: 5rem 1rem 4rem;
    background-color: var(--color-ink);
    color: var(--color-parchment);
  }

  .wcf-ornament {
    font-size: 1.25rem;
    letter-spacing: 0.5em;
    opacity: 0.4;
    margin: 1rem 0;
  }

  .wcf-hero-subtitle {
    font-family: var(--font-body);
    font-style: italic;
    font-size: 0.95rem;
    letter-spacing: 0.15em;
    opacity: 0.7;
    margin-bottom: 1.5rem;
  }

  .wcf-hero-title {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 2.75rem;
    line-height: 1.2;
    letter-spacing: 0.02em;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 768px) {
    .wcf-hero-title {
      font-size: 3.5rem;
    }
    .wcf-hero {
      padding: 6rem 1rem 5rem;
    }
  }

  .wcf-hero-date {
    font-family: var(--font-body);
    font-size: 0.85rem;
    letter-spacing: 0.1em;
    opacity: 0.5;
  }

  /* ── Ornaments & Rules ── */
  .wcf-divider-ornate {
    text-align: center;
    margin: 2rem 0;
    color: var(--color-ink-muted);
    font-size: 0.75rem;
    letter-spacing: 0.75em;
  }

  .wcf-divider-line {
    border: none;
    border-top: 1px solid var(--color-ink-muted);
    opacity: 0.3;
    max-width: 12rem;
    margin: 1.5rem auto;
  }

  /* ── Table of Contents ── */
  .wcf-toc-section {
    padding: 3rem 1rem 3.5rem;
    background-color: white;
  }

  .wcf-toc-heading {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 1.75rem;
    text-align: center;
    letter-spacing: 0.05em;
    color: var(--color-ink);
    margin-bottom: 1.5rem;
  }

  .wcf-toc-list {
    list-style: none;
    padding: 0;
    margin: 2rem 0;
    columns: 1;
  }

  @media (min-width: 640px) {
    .wcf-toc-list {
      columns: 2;
      column-gap: 2.5rem;
    }
  }

  .wcf-toc-list li {
    break-inside: avoid;
  }

  .wcf-toc-link {
    display: block;
    padding: 0.35rem 0;
    padding-left: 2rem;
    text-indent: -2rem;
    font-family: var(--font-body);
    font-size: 0.95rem;
    color: var(--color-ink-light);
    text-decoration: none;
    transition: color 0.2s;
  }

  .wcf-toc-link:hover {
    color: var(--color-accent);
  }

  .wcf-toc-num {
    font-variant-numeric: oldstyle-nums;
    font-weight: 500;
    display: inline-block;
    width: 1.75rem;
    text-align: right;
    margin-right: 0.25rem;
    color: var(--color-ink-muted);
  }

  .wcf-toc-link:hover .wcf-toc-num {
    color: var(--color-accent);
  }

  /* ── Content Section ── */
  .wcf-content-section {
    padding: 3rem 1rem 5rem;
    background-color: white;
  }

  /* ── Chapters ── */
  .wcf-chapter {
    scroll-margin-top: 5rem;
    padding-bottom: 2rem;
  }

  .wcf-chapter-border {
    margin-top: 3.5rem;
    padding-top: 3.5rem;
    border-top: 1px solid var(--color-ink-muted);
    border-top-style: solid;
    position: relative;
  }

  .wcf-chapter-border::before {
    content: "\2726";
    position: absolute;
    top: -0.6em;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--color-parchment);
    padding: 0 1rem;
    color: var(--color-ink-muted);
    font-size: 0.75rem;
  }

  .wcf-chapter-header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .wcf-chapter-label {
    display: block;
    font-family: var(--font-body);
    font-variant-numeric: oldstyle-nums;
    font-size: 0.8rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--color-ink-muted);
    margin-bottom: 0.5rem;
  }

  .wcf-chapter-title {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 1.75rem;
    line-height: 1.3;
    color: var(--color-ink);
    letter-spacing: 0.02em;
  }

  @media (min-width: 768px) {
    .wcf-chapter-title {
      font-size: 2rem;
    }
  }

  .wcf-chapter-rule {
    width: 3rem;
    height: 1px;
    background-color: var(--color-ink-muted);
    opacity: 0.4;
    margin: 1rem auto 0;
  }

  /* ── Paragraphs ── */
  .wcf-paragraph-block {
    margin-bottom: 2rem;
  }

  .wcf-paragraph {
    font-family: var(--font-body);
    font-size: 1.25rem;
    line-height: 1.85;
    color: var(--color-ink);
    text-align: justify;
    hyphens: auto;
  }

  .wcf-para-num {
    font-weight: 600;
    color: var(--color-ink-muted);
    margin-right: 0.25em;
    font-variant-numeric: oldstyle-nums;
  }

  .wcf-sup {
    font-size: 0.65em;
    vertical-align: super;
    line-height: 0;
    color: var(--color-accent);
    font-weight: 600;
    cursor: default;
    margin-left: 1px;
  }

  /* ── Proof Texts ── */
  .wcf-proofs {
    margin-top: 0.75rem;
    opacity: 0.65;
  }

  .wcf-proof-line {
    display: inline;
    font-family: var(--font-body);
    font-size: 0.95rem;
    line-height: 1.6;
    color: var(--color-ink-light);
    margin-right: 0.75rem;
  }

  .wcf-proof-letter {
    font-weight: 600;
    color: var(--color-accent);
    opacity: 0.9;
  }

  .wcf-proof-ref {
    font-style: italic;
  }

  /* ── Back to Top ── */
  .wcf-back-top {
    margin-top: 1.5rem;
    text-align: center;
  }

  .wcf-back-link {
    font-family: var(--font-body);
    font-size: 0.8rem;
    color: var(--color-ink-muted);
    text-decoration: none;
    letter-spacing: 0.05em;
    transition: color 0.2s;
  }

  .wcf-back-link:hover {
    color: var(--color-accent);
  }

  /* ── Finis ── */
  .wcf-finis {
    margin-top: 4rem;
    text-align: center;
    font-family: var(--font-display);
    font-style: italic;
    font-size: 1.25rem;
    color: var(--color-ink-muted);
    letter-spacing: 0.1em;
  }
</style>
